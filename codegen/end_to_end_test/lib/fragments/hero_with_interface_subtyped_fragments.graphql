query HeroWithInterfaceSubTypedFragments($episode: Episode!) {
  hero(episode: $episode) {
    ...heroFieldsFragment
  }
}

fragment heroFieldsFragment on Character {
  id
  name

  ...on Human {
    ...humanFieldsFragment
  }

  ...on Droid {
    ...droidFieldsFragment
  }
}

fragment humanFieldsFragment on Human {
  homePlanet
  birthday
  friends {
    ...on Droid {
      id
      name
      ...droidFieldsFragment
    }
    #### NOTE: This cannot self-reference ...humanFieldsFragment hench the expanded fields
    ...on Human {
      id
      name
      homePlanet
      birthday
    }
  }
}

fragment droidFieldsFragment on Droid {
  primaryFunction
}
