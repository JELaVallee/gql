query HeroWithFragments($first: Int) {
  hero(episode: JEDI) {
    ...characterFields
    ## FAIL - These fail to resolve fields on Interface extended Type
    ...humanFields
    # ...droidFields

    ## PASS - This is fine if the fragment nest in and in-line that is a TypedNode
    # ... on Human {
    #    ...humanFields
    # }
    # ... on Droid {
    #   ...droidFields
    # }
  }
}

## PASS - This is equivalent to L9-10, BUT the `on Human` on L19 is effectively ignored and codegen is slightly different
fragment humanFields on Human {
  ... on Human {
    homePlanet
  }
}

fragment droidFields on Droid {
  primaryFunction
}

fragment characterFields on Character {
  id
  name

  #### THIS IS OUR CORE BUG ####
  ## PASS - This now passes with the fix in 24524d8
  # ... on Droid {
  #   ...droidFields
  # }
  ## PASS - This now passes with the fix in 24524d8
  # ... on Human {
  #   homePlanet
  # }
}
